<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Tienda en LÃ­nea</title>
  <style>
    body {
      font-family: sans-serif;
      margin: 0;
      padding: 0;
    }
    header {
      background: #222;
      color: white;
      padding: 1em;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    .grupo, .producto {
      display: inline-block;
      margin: 10px;
      text-align: center;
      cursor: pointer;
    }
    .grupo img, .producto img {
      width: 100px;
      height: 100px;
      object-fit: cover;
      border-radius: 10px;
    }
    #productos-container h2 {
      margin-top: 20px;
    }
    .producto button {
      margin-top: 5px;
      padding: 5px 10px;
    }
    .modal, .modal-resumen {
      display: none;
      position: fixed;
      top: 0; left: 0;
      width: 100%; height: 100%;
      background: rgba(0,0,0,0.8);
      justify-content: center;
      align-items: center;
      z-index: 10;
    }
    .modal.active, .modal-resumen.active {
      display: flex;
    }
    .modal-content, .resumen-content {
      background: white;
      padding: 20px;
      border-radius: 10px;
      max-width: 400px;
      width: 90%;
    }
    .carrito {
      position: relative;
      cursor: pointer;
    }
    .carrito span {
      position: absolute;
      top: -10px;
      right: -10px;
      background: red;
      color: white;
      border-radius: 50%;
      padding: 2px 6px;
      font-size: 12px;
    }
    .pedido-item {
      display: flex;
      justify-content: space-between;
      border-bottom: 1px solid #ccc;
      padding: 5px 0;
    }
  </style>
</head>
<body>
  <header>
    <h1>Tienda Online</h1>
    <div class="carrito" onclick="abrirResumen()">
      ðŸ›’<span id="contador-carrito">0</span>
    </div>
  </header>
  <main>
    <div id="grupos-container"></div>
    <div id="productos-container"></div>
  </main>

  <!-- Modal cantidad -->
  <div class="modal" id="modal-cantidad">
    <div class="modal-content">
      <h3 id="modal-producto-nombre"></h3>
      <label for="cantidad-input">Cantidad:</label>
      <input type="number" id="cantidad-input" value="1" min="1" />
      <br /><br />
      <button id="agregar-carrito-btn">Agregar al carrito</button>
      <button onclick="cerrarModal()">Cancelar</button>
    </div>
  </div>

  <!-- Modal resumen -->
  <div class="modal-resumen" id="modal-resumen">
    <div class="resumen-content">
      <h3>Resumen del pedido</h3>
      <div id="lista-pedido"></div>
      <p id="total-general"></p>
      <form id="formulario-pedido">
        <input type="text" placeholder="Tu nombre" required><br><br>
        <input type="text" placeholder="Tu nÃºmero de WhatsApp" required><br><br>
        <textarea placeholder="Detalles del pedido" readonly></textarea><br><br>
        <button type="submit">Enviar pedido</button>
        <button type="button" onclick="cerrarResumen()">Cerrar</button>
      </form>
    </div>
  </div>

  <script>
    const productosPorGrupo = {
      "Mosquiteros": [
        { nombre: "Mosquitero sencillo", imagen: "https://i.postimg.cc/xT8cd4DK/mosquitero-sencillo.jpg" },
        { nombre: "Mosquitero doble", imagen: "https://i.postimg.cc/Zqtwfvn6/mosquitero-doble.jpg" }
      ],
      "CosmÃ©ticos": [
        { nombre: "Labial", imagen: "https://i.postimg.cc/Y2cP43bX/labial.jpg" },
        { nombre: "Base", imagen: "https://i.postimg.cc/hjD7QXDK/base.jpg" },
        { nombre: "Labial2", imagen: "https://i.postimg.cc/FKbWVtYR/labial2.jpg" }
      ],
      "Extensiones": [
        { nombre: "ExtensiÃ³n rizada", imagen: "https://i.postimg.cc/GpXYxR0D/extension-rizada.jpg" }
      ],
      "Accesorios bebÃ©s": [
        { nombre: "Chupete", imagen: "https://i.postimg.cc/2SfvLgd1/chupete.jpg" }
      ],
      "Productos escolares": [
        { nombre: "Cuaderno", imagen: "https://i.postimg.cc/26Qdpd6y/cuaderno.jpg" }
      ],
      "Mochilas": [
        { nombre: "Mochila casual", imagen: "https://i.postimg.cc/sXsSYRwn/mochila-casual.jpg" }
      ],
      "Peluches": [
        { nombre: "Osito", imagen: "https://i.postimg.cc/NGDLmfFq/oso.jpg" },
        { nombre: "frocen", imagen: "https://i.postimg.cc/L6syXDMm/frozen.jpg" },
        { nombre: "caty", imagen: "https://i.postimg.cc/KzT2KXmf/caty.jpg" }
      ],
      "MueblerÃ­a": [
        { nombre: "mesa1", imagen: "https://i.postimg.cc/K8XBY7rh/mesa1.jpg" },
        { nombre: "mesa2", imagen: "https://i.postimg.cc/wTZ7X1St/mesa2.jpg" },
        { nombre: "zapatera1", imagen: "https://i.postimg.cc/X71zxWQG/zapatera1.jpg" },
        { nombre: "zapatera2", imagen: "https://i.postimg.cc/8z5GDkh0/zapatera2.jpg" },
        { nombre: "zapatera3", imagen: "https://i.postimg.cc/6pPBvHTG/zapatera3.jpg" }
      ]
    };

    const precios = {
      "Mosquitero sencillo": 7.00,
      "Mosquitero doble": 10.00,
      "Labial": 2.50,
      "Base": 3.50,
      "Labial2": 2.25,
      "ExtensiÃ³n rizada": 8.00,
      "Chupete": 1.50,
      "Cuaderno": 1.00,
      "Mochila casual": 12.00,
      "Osito": 5.00,
      "frocen": 15.00,
      "caty": 14.00,
      "mesa1": 25.00,
      "mesa2": 30.00,
      "zapatera1": 18.00,
      "zapatera2": 20.00,
      "zapatera3": 22.00
    };

    const gruposContainer = document.getElementById("grupos-container");
    const productosContainer = document.getElementById("productos-container");
    const modal = document.getElementById("modal-cantidad");
    const modalResumen = document.getElementById("modal-resumen");
    const contadorCarrito = document.getElementById("contador-carrito");
    const modalNombre = document.getElementById("modal-producto-nombre");
    const cantidadInput = document.getElementById("cantidad-input");
    const listaPedido = document.getElementById("lista-pedido");
    const formulario = document.getElementById("formulario-pedido");
    const totalGeneral = document.getElementById("total-general");
    const detallesField = formulario.querySelector("textarea");
    let productoActual = null;
    const carrito = [];

    for (let grupo in productosPorGrupo) {
      const div = document.createElement("div");
      div.className = "grupo";
      div.innerHTML = `<img src="${productosPorGrupo[grupo][0].imagen}" alt="${grupo}"><div>${grupo}</div>`;
      div.onclick = () => mostrarProductos(grupo);
      gruposContainer.appendChild(div);
    }

    function mostrarProductos(grupo) {
      productosContainer.innerHTML = `<h2>${grupo}</h2>`;
      productosPorGrupo[grupo].forEach(p => {
        const precio = precios[p.nombre]?.toFixed(2) || "0.00";
        const div = document.createElement("div");
        div.className = "producto";
        div.innerHTML = `
          <img src="${p.imagen}" alt="${p.nombre}" onclick="mostrarImagen('${p.imagen}')">
          <br>
          <span><strong>${p.nombre}</strong><br><small>$${precio}</small></span>
          <br>
          <button onclick="seleccionarProducto('${p.nombre}')">AÃ±adir</button>
        `;
        productosContainer.appendChild(div);
      });
    }

    function mostrarImagen(imagen) {
      const img = document.createElement("img");
      img.src = imagen;
      img.style.maxWidth = "90%";
      img.style.maxHeight = "90%";
      const overlay = document.createElement("div");
      overlay.style.position = "fixed";
      overlay.style.top = 0;
      overlay.style.left = 0;
      overlay.style.width = "100%";
      overlay.style.height = "100%";
      overlay.style.background = "rgba(0,0,0,0.9)";
      overlay.style.display = "flex";
      overlay.style.justifyContent = "center";
      overlay.style.alignItems = "center";
      overlay.appendChild(img);
      overlay.onclick = () => document.body.removeChild(overlay);
      document.body.appendChild(overlay);
    }

    function seleccionarProducto(nombre) {
      productoActual = nombre;
      modalNombre.textContent = nombre;
      cantidadInput.value = 1;
      modal.classList.add("active");
    }

    function cerrarModal() {
      modal.classList.remove("active");
    }

    function cerrarResumen() {
      modalResumen.classList.remove("active");
    }

    document.getElementById("agregar-carrito-btn").onclick = () => {
      const cantidad = parseInt(cantidadInput.value);
      if (productoActual && cantidad > 0) {
        carrito.push({ nombre: productoActual, cantidad });
        contadorCarrito.textContent = carrito.length;
        cerrarModal();
      }
    };

    function abrirResumen() {
      listaPedido.innerHTML = "";
      let total = 0;
      let resumenTexto = "";

      carrito.forEach(item => {
        const precioUnitario = precios[item.nombre] || 0;
        const subtotal = precioUnitario * item.cantidad;
        total += subtotal;

        const div = document.createElement("div");
        div.className = "pedido-item";
        div.innerHTML = `<span>${item.nombre} Ã— ${item.cantidad}</span><span>$${subtotal.toFixed(2)}</span>`;
        listaPedido.appendChild(div);

        resumenTexto += `${item.nombre} x ${item.cantidad} = $${subtotal.toFixed(2)}\n`;
      });

      totalGeneral.textContent = `Total general: $${total.toFixed(2)}`;
      detallesField.value = resumenTexto + `\nTOTAL: $${total.toFixed(2)}`;
      modalResumen.classList.add("active");
    }

    formulario.onsubmit = (e) => {
      e.preventDefault();
      alert("Â¡Pedido enviado correctamente!");
      carrito.length = 0;
      contadorCarrito.textContent = "0";
      cerrarResumen();
      formulario.reset();
    };
  </script>
</body>
</html>
