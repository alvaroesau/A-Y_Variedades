<!-- Asegúrate de que el HEAD tenga esto en algún lugar -->
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Tienda Online</title>
  <style>
    /* … todos tus estilos anteriores aquí … */
    /* (No los repito para ahorrar espacio, pero mantenlos todos) */

    .formulario-pedido {
      display: flex;
      flex-direction: column;
      margin-top: 20px;
      gap: 10px;
    }

    .formulario-pedido input,
    .formulario-pedido textarea {
      padding: 8px;
      border-radius: 5px;
      border: none;
      font-size: 1rem;
    }

    .formulario-pedido textarea {
      resize: none;
      height: 120px;
    }

    .formulario-pedido button {
      background-color: #fcd000;
      color: #000;
      font-weight: bold;
      padding: 10px;
    }

    .confirmacion {
      text-align: center;
      padding: 20px;
      color: #fff;
    }
  </style>
</head>
<body>

  <!-- TODO lo demás sigue igual hasta aquí -->

  <!-- Modal resumen de carrito con formulario -->
  <div class="modal" id="modal-resumen">
    <div class="modal-content" id="resumen-content">
      <h3>Resumen del Pedido</h3>
      <div id="lista-pedido"></div>

      <form class="formulario-pedido" id="formulario" action="https://formsubmit.co/yoselyn96vasquez@gmail.com" method="POST" onsubmit="return enviarFormulario()">
        <input type="text" name="nombre" placeholder="Tu nombre" required />
        <input type="text" name="whatsapp" placeholder="Tu número de WhatsApp" required />
        <input type="text" name="direccion" placeholder="Tu dirección o zona de entrega" required />

        <textarea name="pedido" id="detalles-pedido" readonly></textarea>

        <!-- Config FormSubmit -->
        <input type="hidden" name="_captcha" value="false">
        <input type="hidden" name="_next" value="https://gracias.com/">

        <button type="submit">Enviar Pedido</button>
      </form>

      <button onclick="cerrarResumen()" style="margin-top:10px;">Cerrar</button>
    </div>
  </div>

  <!-- Modal de confirmación -->
  <div class="modal" id="modal-confirmacion">
    <div class="modal-content confirmacion">
      <h3>¡Gracias por tu pedido!</h3>
      <p>Tu orden ha sido enviada con éxito. Pronto nos pondremos en contacto contigo.</p>
      <button onclick="cerrarConfirmacion()">Aceptar</button>
    </div>
  </div>

  <script>
    // Tu código anterior se mantiene...

    function abrirResumen() {
      listaPedido.innerHTML = '';
      if (carrito.length === 0) {
        listaPedido.innerHTML = '<p>Tu carrito está vacío.</p>';
      } else {
        let detalles = '';
        carrito.forEach(item => {
          const div = document.createElement('div');
          div.className = 'pedido-item';
          div.innerHTML = `<span>${item.producto}</span><span>x${item.cantidad}</span>`;
          listaPedido.appendChild(div);
          detalles += `${item.producto} x${item.cantidad}\n`;
        });
        document.getElementById('detalles-pedido').value = detalles;
      }
      modalResumen.classList.add('active');
    }

    function cerrarResumen() {
      modalResumen.classList.remove('active');
    }

    function enviarFormulario() {
      setTimeout(() => {
        modalResumen.classList.remove('active');
        document.getElementById('modal-confirmacion').classList.add('active');
        carrito = [];
        actualizarContador();
      }, 500); // Espera 0.5s para mostrar confirmación
      return true;
    }

    function cerrarConfirmacion() {
      document.getElementById('modal-confirmacion').classList.remove('active');
    }
  </script>
</body>
