<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Tienda en LÃ­nea - Productos por Grupo</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 20px;
    }
    h1 {
      text-align: center;
    }
    /* Contenedor grupos */
    #grupos-container {
      display: flex;
      flex-wrap: wrap;
      gap: 15px;
      justify-content: center;
      margin-bottom: 30px;
    }
    .grupo {
      cursor: pointer;
      border: 1px solid #ccc;
      border-radius: 10px;
      overflow: hidden;
      width: 140px;
      text-align: center;
      transition: box-shadow 0.3s;
    }
    .grupo:hover {
      box-shadow: 0 0 8px #007bff;
    }
    .grupo img {
      width: 100%;
      height: 100px;
      object-fit: contain;
      background: #f9f9f9;
    }
    .grupo p {
      margin: 8px 0;
      font-weight: bold;
    }

    /* Contenedor productos */
    #productos-container {
      display: flex;
      flex-wrap: wrap;
      gap: 20px;
      justify-content: center;
    }
    .producto {
      border: 1px solid #ddd;
      border-radius: 8px;
      width: 180px;
      padding: 10px;
      text-align: center;
      box-shadow: 0 0 5px #ccc;
      transition: box-shadow 0.3s;
    }
    .producto:hover {
      box-shadow: 0 0 10px #28a745;
    }
    .producto img {
      width: 100%;
      height: 130px;
      object-fit: contain;
      background: #fafafa;
    }
    .producto h3 {
      margin: 10px 0 5px;
      font-size: 1.1em;
    }
    .producto p.precio {
      font-weight: bold;
      color: #28a745;
      margin: 5px 0 10px;
      font-size: 1.1em;
    }
    .producto button {
      padding: 8px 12px;
      border: none;
      background-color: #28a745;
      color: white;
      border-radius: 5px;
      cursor: pointer;
      font-size: 0.95em;
    }
    .producto button:hover {
      background-color: #218838;
    }

    /* Modal carrito */
    #modal-carrito {
      position: fixed;
      top: 0;
      left: 0;
      width: 100vw;
      height: 100vh;
      background-color: rgba(0,0,0,0.5);
      display: none;
      justify-content: center;
      align-items: center;
      z-index: 1000;
    }
    #modal-carrito .contenido {
      background: white;
      border-radius: 10px;
      width: 90%;
      max-width: 500px;
      max-height: 80vh;
      overflow-y: auto;
      padding: 20px;
      box-sizing: border-box;
      position: relative;
    }
    #modal-carrito .contenido h2 {
      margin-top: 0;
      text-align: center;
    }
    #modal-carrito .cerrar {
      position: absolute;
      top: 12px;
      right: 12px;
      cursor: pointer;
      font-weight: bold;
      font-size: 20px;
      border: none;
      background: none;
    }
    table {
      width: 100%;
      border-collapse: collapse;
      margin-bottom: 15px;
    }
    table th, table td {
      border: 1px solid #ddd;
      padding: 6px 8px;
      text-align: center;
      font-size: 0.9em;
    }
    table th {
      background-color: #f0f0f0;
    }
    #total-general {
      font-weight: bold;
      font-size: 1.2em;
      text-align: right;
      margin-top: 10px;
    }
    #abrir-carrito {
      position: fixed;
      right: 20px;
      bottom: 20px;
      background: #007bff;
      border: none;
      color: white;
      padding: 15px 20px;
      border-radius: 50px;
      font-size: 1.2em;
      cursor: pointer;
      box-shadow: 0 2px 10px rgba(0,0,0,0.3);
      z-index: 1100;
    }
    #abrir-carrito:hover {
      background: #0056b3;
    }
  </style>
</head>
<body>

  <h1>Tienda en LÃ­nea</h1>

  <div id="grupos-container">
    <!-- Grupos de productos se cargan aquÃ­ -->
  </div>

  <div id="productos-container">
    <p style="text-align:center; color:#777;">Elige un grupo de producto para ver sus artÃ­culos.</p>
  </div>

  <button id="abrir-carrito" title="Ver carrito ðŸ›’">ðŸ›’ Carrito (<span id="contador-carrito">0</span>)</button>

  <!-- Modal del carrito -->
  <div id="modal-carrito">
    <div class="contenido">
      <button class="cerrar" title="Cerrar carrito">Ã—</button>
      <h2>Carrito de Compras</h2>
      <table id="tabla-carrito">
        <thead>
          <tr>
            <th>Producto</th>
            <th>Cant.</th>
            <th>Precio</th>
            <th>Subtotal</th>
            <th>Quitar</th>
          </tr>
        </thead>
        <tbody>
          <!-- Items carrito -->
        </tbody>
      </table>
      <div id="total-general">Total: $0.00</div>
    </div>
  </div>

  <script>
    // Datos grupos con imagenes
    const grupos = [
      { id: "mosquiteros", nombre: "Mosquiteros", img: "https://raw.githubusercontent.com/esauve/tupetok32/main/mosquitera2.webp" },
      { id: "cosmeticos", nombre: "CosmÃ©ticos", img: "https://raw.githubusercontent.com/esauve/tupetok32/main/cosmeticos.webp" },
      { id: "extensiones", nombre: "Extensiones para cabello", img: "https://raw.githubusercontent.com/esauve/tupetok32/main/extensiones.webp" },
      { id: "bebe", nombre: "Accesorios para bebÃ©s", img: "https://raw.githubusercontent.com/esauve/tupetok32/main/bebe.webp" },
      { id: "escolares", nombre: "Productos escolares", img: "https://raw.githubusercontent.com/esauve/tupetok32/main/productos_escolares.webp" },
      { id: "mochilas", nombre: "Mochilas", img: "https://raw.githubusercontent.com/esauve/tupetok32/main/mochilas.webp" },
      { id: "peluches", nombre: "Peluches", img: "https://raw.githubusercontent.com/esauve/tupetok32/main/peluches.webp" },
      { id: "muebleria", nombre: "MueblerÃ­a", img: "https://raw.githubusercontent.com/esauve/tupetok32/main/muebles.webp" }
    ];

    // Datos productos organizados por grupo
    const productosPorGrupo = {
      mosquiteros: [
        { id: "m1", nombre: "Mosquitero Simple", precio: 25.00, img: "https://raw.githubusercontent.com/esauve/tupetok32/main/mosquitera2.webp" },
        { id: "m2", nombre: "Mosquitero Doble", precio: 40.00, img: "https://raw.githubusercontent.com/esauve/tupetok32/main/mosquitera2.webp" }
      ],
      cosmeticos: [
        { id: "c1", nombre: "Crema Facial", precio: 15.00, img: "https://raw.githubusercontent.com/esauve/tupetok32/main/cosmeticos.webp" },
        { id: "c2", nombre: "Labial Rojo", precio: 10.00, img: "https://raw.githubusercontent.com/esauve/tupetok32/main/cosmeticos.webp" }
      ],
      extensiones: [
        { id: "e1", nombre: "ExtensiÃ³n Lisa", precio: 55.00, img: "https://raw.githubusercontent.com/esauve/tupetok32/main/extensiones.webp" },
        { id: "e2", nombre: "ExtensiÃ³n Rizada", precio: 60.00, img: "https://raw.githubusercontent.com/esauve/tupetok32/main/extensiones.webp" }
      ],
      bebe: [
        { id: "b1", nombre: "ChupÃ³n", precio: 5.00, img: "https://raw.githubusercontent.com/esauve/tupetok32/main/bebe.webp" },
        { id: "b2", nombre: "PaÃ±ales", precio: 12.00, img: "https://raw.githubusercontent.com/esauve/tupetok32/main/bebe.webp" }
      ],
      escolares: [
        { id: "es1", nombre: "Cuaderno A5", precio: 3.50, img: "https://raw.githubusercontent.com/esauve/tupetok32/main/productos_escolares.webp" },
        { id: "es2", nombre: "Set de lÃ¡pices", precio: 7.00, img: "https://raw.githubusercontent.com/esauve/tupetok32/main/productos_escolares.webp" }
      ],
      mochilas: [
        { id: "mo1", nombre: "Mochila Escolar", precio: 30.00, img: "https://raw.githubusercontent.com/esauve/tupetok32/main/mochilas.webp" },
        { id: "mo2", nombre: "Mochila de Viaje", precio: 50.00, img: "https://raw.githubusercontent.com/esauve/tupetok32/main/mochilas.webp" }
      ],
      peluches: [
        { id: "p1", nombre: "Peluche Mediano", precio: 20.00, img: "https://raw.githubusercontent.com/esauve/tupetok32/main/peluches.webp" },
        { id: "p2", nombre: "Peluche Grande", precio: 35.00, img: "https://raw.githubusercontent.com/esauve/tupetok32/main/peluches.webp" }
      ],
      muebleria: [
        { id: "mu1", nombre: "Silla de Madera", precio: 70.00, img: "https://raw.githubusercontent.com/esauve/tupetok32/main/muebles.webp" },
        { id: "mu2", nombre: "Mesa PequeÃ±a", precio: 120.00, img: "https://raw.githubusercontent.com/esauve/tupetok32/main/muebles.webp" }
      ]
    };

    // Carrito: objeto que almacenarÃ¡ { idProducto: { ...producto, cantidad } }
    let carrito = {};

    // Referencias DOM
    const gruposContainer = document.getElementById("grupos-container");
    const productosContainer = document.getElementById("productos-container");
    const modalCarrito = document.getElementById("modal-carrito");
    const tablaCarritoBody = document.querySelector("#tabla-carrito tbody");
    const totalGeneralElem = document.getElementById("total-general");
    const contadorCarritoElem = document.getElementById("contador-carrito");
    const abrirCarritoBtn = document.getElementById("abrir-carrito");
    const cerrarModalBtn = modalCarrito.querySelector(".cerrar");

    // Mostrar grupos de productos
    function mostrarGrupos() {
      gruposContainer.innerHTML = "";
      grupos.forEach(grupo => {
        const div = document.createElement("div");
        div.classList.add("grupo");
        div.dataset.id = grupo.id;
        div.innerHTML = `
          <img src="${grupo.img}" alt="${grupo.nombre}" />
          <p>${grupo.nombre}</p>
        `;
        div.addEventListener("click", () => {
          mostrarProductos(grupo.id);
        });
        gruposContainer.appendChild(div);
      });
    }

    // Mostrar productos segÃºn grupo seleccionado
    function mostrarProductos(idGrupo) {
      productosContainer.innerHTML = ""; // limpia antes
      const productos = productosPorGrupo[idGrupo];
      if (!productos || productos.length === 0) {
        productosContainer.innerHTML = "<p style='text-align:center;'>No hay productos para mostrar.</p>";
        return;
      }
      productos.forEach(producto => {
        const div = document.createElement("div");
        div.classList.add("producto");
        div.innerHTML = `
          <img src="${producto.img}" alt="${producto.nombre}" />
          <h3>${producto.nombre}</h3>
          <p class="precio">$${producto.precio.toFixed(2)}</p>
          <button data-id="${producto.id}">Agregar al carrito</button>
        `;
        // Agregar evento para botÃ³n "Agregar al carrito"
        div.querySelector("button").addEventListener("click", () => {
          agregarAlCarrito(producto);
        });
        productosContainer.appendChild(div);
      });
    }

    // Agregar producto al carrito
    function agregarAlCarrito(producto) {
      if (carrito[producto.id]) {
        carrito[producto.id].cantidad += 1;
      } else {
        carrito[producto.id] = {
          ...producto,
          cantidad: 1
        };
      }
      actualizarContadorCarrito();
      actualizarTablaCarrito();
      abrirModalCarrito();
    }

    // Actualizar contador del carrito (mostrar cantidad total de productos)
    function actualizarContadorCarrito() {
      let totalCant = 0;
      Object.values(carrito).forEach(item => {
        totalCant += item.cantidad;
      });
      contadorCarritoElem.textContent = totalCant;
    }

    // Actualizar tabla del carrito en modal
    function actualizarTablaCarrito() {
      tablaCarritoBody.innerHTML = "";
      let total = 0;

      for (const key in carrito) {
        const item = carrito[key];
        const subtotal = item.precio * item.cantidad;
        total += subtotal;

        const fila = document.createElement("tr");
        fila.innerHTML = `
          <td>${item.nombre}</td>
          <td>${item.cantidad}</td>
          <td>$${item.precio.toFixed(2)}</td>
          <td>$${subtotal.toFixed(2)}</td>
          <td><button class="btn-quitar" data-id="${item.id}">X</button></td>
        `;
        // Evento para quitar producto del carrito
        fila.querySelector(".btn-quitar").addEventListener("click", () => {
          quitarDelCarrito(item.id);
        });

        tablaCarritoBody.appendChild(fila);
      }
      totalGeneralElem.textContent = `Total: $${total.toFixed(2)}`;
    }

    // Quitar producto del carrito
    function quitarDelCarrito(idProducto) {
      if (carrito[idProducto]) {
        carrito[idProducto].cantidad -= 1;
        if (carrito[idProducto].cantidad <= 0) {
          delete carrito[idProducto];
        }
        actualizarContadorCarrito();
        actualizarTablaCarrito();
      }
    }

    // Abrir modal carrito
    function abrirModalCarrito() {
      modalCarrito.style.display = "flex";
    }
    // Cerrar modal carrito
    function cerrarModalCarrito() {
      modalCarrito.style.display = "none";
    }

    // Eventos para abrir y cerrar modal
    abrirCarritoBtn.addEventListener("click", abrirModalCarrito);
    cerrarModalBtn.addEventListener("click", cerrarModalCarrito);
    modalCarrito.addEventListener("click", (e) => {
      if (e.target === modalCarrito) cerrarModalCarrito();
    });

    // Inicializar
    mostrarGrupos();
  </script>
</body>
</html>
